

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Maple Library Reference &mdash; Maple v0.0.9 Documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/breathe.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/round_logo_32x32.ico"/>
    <link rel="top" title="Maple v0.0.9 Documentation" href="index.html" />
    <link rel="next" title="Servo" href="libs/servo.html" />
    <link rel="prev" title="Maple Language Reference" href="language.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="libs/servo.html" title="Servo"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="language.html" title="Maple Language Reference"
             accesskey="P">previous</a> |</li>
    <li><a href="http://leaflabs.com">LeafLabs</a> |</li>
    <li><a href="index.html">Docs Home</a> |</li>
    
        <li><a href="index.html">Index</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="maple-library-reference">
<span id="libraries"></span><h1>Maple Library Reference<a class="headerlink" href="#maple-library-reference" title="Permalink to this headline">¶</a></h1>
<p>This page briefly summarizes the Arduino libraries that have been
ported to Maple. You can use a library from within a sketch by going
to Sketch &gt; Import Library... from within the IDE, then choosing the
library you want.</p>
<p>Any incompatibilities between the Maple and Arduino versions are noted
in the description of the library.</p>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#servo" id="id2">Servo</a></li>
<li><a class="reference internal" href="#liquidcrystal" id="id3">LiquidCrystal</a></li>
<li><a class="reference internal" href="#wire" id="id4">Wire</a><ul>
<li><a class="reference internal" href="#wire-function-reference" id="id5">Wire Function Reference</a></li>
</ul>
</li>
</ul>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="servo">
<span id="libraries-servo"></span><h2><a class="toc-backref" href="#id2">Servo</a><a class="headerlink" href="#servo" title="Permalink to this headline">¶</a></h2>
<p>The Servo library is provided for convenient control of RC
servomotors.  For more information, see the <a class="reference internal" href="libs/servo.html#libs-servo"><em>Servo</em></a>
reference.</p>
<p><strong>Compatibility Note</strong></p>
<p>The Servo class provides a public interface identical to the Arduino
version&#8217;s documented functionality (as of Arduino 0021), so in most
cases, this library will be a drop-in replacement.</p>
<p>However, there are some differences, essentially at the level of
implementation details.</p>
<p>The major difference is that while the Arduino implementation drives
the servos with &#8220;bit-banged&#8221; <a class="reference internal" href="pwm.html#pwm"><em>PWM</em></a>, the Maple
implementation uses <a class="reference internal" href="timers.html#timers"><em>timers</em></a> to drive the PWM directly.</p>
<p>Consequently, <strong>the Maple implementation only allows Servo instances
to</strong> <a class="reference internal" href="libs/servo.html#libs-servo-attach"><em>attach</em></a> <strong>to pins that support PWM</strong>.</p>
<p>To determine if a pin supports PWM (15 Maple pins do), you can either
check if &#8220;PWM&#8221; appears next to its number on the Maple silkscreen, or
consult the <a class="reference internal" href="lang/api/pwmwrite.html#lang-pwmwrite"><em>pwmWrite()</em></a> documentation.</p>
<p>RC Servos expect a pulse approximately every 20ms.  In the Maple
implementation, <a class="reference internal" href="lang/api/hardwaretimer.html#lang-hardwaretimer-setperiod"><em>periods</em></a> are set
for entire timers, rather than individual channels.  Thus,
<tt class="docutils literal"><span class="pre">attach()</span></tt>ing a Servo to a pin can interfere with other pins
associated with the same timer<a class="footnote-reference" href="#fard-servo" id="id1">[1]</a>.</p>
<p>Because of this, we recommend connecting multiple servomotors to pins
which share a timer, in order to keep as many timers free for other
purposes as possible.  Consult the <a class="reference internal" href="timers.html#timers-pin-channel-map"><em>table provided in the timers
reference</em></a> to match up pins and timer
channels.</p>
<p>Another difference: although it is not publicly documented to do so,
the Arduino implementation of <a class="reference external" href="http://arduino.cc/en/Reference/ServoAttach">attach()</a> returns the timer
channel associated with the newly-attached pin, or 0 on failure (as of
Arduino 0021).  The Maple implementation returns true on success, and
false on failure (and this is its documented behavior).</p>
</div>
<div class="section" id="liquidcrystal">
<span id="libraries-liquid-crystal"></span><h2><a class="toc-backref" href="#id3">LiquidCrystal</a><a class="headerlink" href="#liquidcrystal" title="Permalink to this headline">¶</a></h2>
<p>The LiquidCrystal library allows Maple to control LCD screens. For
more information, see the <a class="reference external" href="http://www.arduino.cc/en/Reference/LiquidCrystal">Arduino LiquidCrystal documentation</a>.</p>
<p><strong>Compatibility Note</strong></p>
<p>At this time, no incompatibilities between the Maple and Arduino
versions are known. Any observed differences should be considered
bugs, and reported on the forums.</p>
</div>
<div class="section" id="wire">
<span id="libraries-wire"></span><h2><a class="toc-backref" href="#id4">Wire</a><a class="headerlink" href="#wire" title="Permalink to this headline">¶</a></h2>
<p>We provide a soft (bit-banged) implementation of the <a class="reference external" href="http://arduino.cc/en/Reference/WireBegin">Wire I2C library</a>.</p>
<p><strong>Compatibility Note</strong></p>
<p>This implementation is synchronous, and thus supports only a subset of
the full Wire interface (however, the functionality which is supported
is fully compatible with Arduino). For now, please use the function
reference which follows when developing projects using our
implementation.</p>
<p>Please note that the current implementation only supports master mode
using a bit-banged (software) protocol. Future enhancements will use
the hardware i2c peripheral on the stm32 as well as the DMA for
performance. Support for slave, smBUS, and multimaster modes are also
slated for inclusion in the enhanced Wire port.</p>
<div class="section" id="wire-function-reference">
<h3><a class="toc-backref" href="#id5">Wire Function Reference</a><a class="headerlink" href="#wire-function-reference" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Wire.begin()</span></tt></dt>
<dd>Joins the i2c bus as master, using pin 20 as SDA and pin 21 as SCL
(this is compatible with the pin settings on the Arduino Mega).</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.begin(sda,</span> <span class="pre">scl)</span></tt></dt>
<dd>Like <tt class="docutils literal"><span class="pre">Wire.begin()</span></tt>, but with the given pins as SDA and
SCL.</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.beginTransmission(slave_address)</span></tt></dt>
<dd>Set up a transmission to a slave device with the given (7-bit)
address. Bytes subsequently queued for transmission (using
<tt class="docutils literal"><span class="pre">Wire.send</span></tt>) will be sent to <tt class="docutils literal"><span class="pre">slave_address</span></tt> when <tt class="docutils literal"><span class="pre">void</span>
<span class="pre">Wire.endTransmission()</span></tt> is called.</dd>
<dt><tt class="docutils literal"><span class="pre">void</span> <span class="pre">Wire.send(byte)</span></tt></dt>
<dd>Queues the given byte (<tt class="docutils literal"><span class="pre">uint8</span></tt> or <tt class="docutils literal"><span class="pre">int</span></tt>) to the slave address
previously specified by a call to <tt class="docutils literal"><span class="pre">Wire.beginTransmission</span></tt>. At
most 32 bytes may be queued in a single transmission.</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.send(string)</span></tt></dt>
<dd>Queues a given string (<tt class="docutils literal"><span class="pre">char*</span></tt>) for transmission. The characters
of the string are individually queued for transmission as
bytes. At most 32 bytes may be queued in a single transmission.</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.send(buffer,</span> <span class="pre">length)</span></tt></dt>
<dd>Queues a byte buffer <tt class="docutils literal"><span class="pre">buffer</span></tt> (<tt class="docutils literal"><span class="pre">uint8*</span></tt> or <tt class="docutils literal"><span class="pre">int*</span></tt>), with
<tt class="docutils literal"><span class="pre">length</span></tt> elements, for transmission. At most 32 bytes may be
queued in a single transmission.</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.endTransmission()</span></tt></dt>
<dd><p class="first">Ends a transmission (begun by <tt class="docutils literal"><span class="pre">Wire.beginTransmission(uint8)</span></tt>),
and actually sends the bytes queued by calls to Wire.send.</p>
<p>The return value is one of the following status codes:</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">SUCCESS</span></tt>: All bytes were transmitted successfully.</li>
<li><tt class="docutils literal"><span class="pre">EDATA</span></tt>: More than 32 bytes were queued for transmission. No
bytes are actually sent when this happens.</li>
<li><tt class="docutils literal"><span class="pre">ENACKADDR</span></tt>: Did not receive ACK on transmit of address. No
bytes are actually sent when this happens.</li>
<li><tt class="docutils literal"><span class="pre">ENACKTRNS</span></tt>: Did not receive ACK during transmit of data. Some
bytes may have been sent when this happens; however, the
transmission is aborted after the first byte of data which is
not ACKed by the slave device.</li>
<li><tt class="docutils literal"><span class="pre">EOTHER</span></tt>: Other error occurred.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.requestFrom(address,</span> <span class="pre">num_bytes)</span></tt></dt>
<dd><p class="first">Requests <tt class="docutils literal"><span class="pre">num_bytes</span></tt> bytes from 7-bit slave address
address. Returns the actual number of bytes read. These bytes may
subsequently be read one at a time using <tt class="docutils literal"><span class="pre">Wire.receive()</span></tt>.</p>
<p class="last">Note: if <tt class="docutils literal"><span class="pre">num_bytes</span></tt> exceeds the size of the transmit/receive
buffer (currently 32), it will be truncated to 32.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.receive()</span></tt></dt>
<dd>Get and return the next byte read during the previous call to
<tt class="docutils literal"><span class="pre">Wire.requestFrom(uint8,</span> <span class="pre">int)</span></tt>. You can check how many bytes are
left to read using <tt class="docutils literal"><span class="pre">uint8</span> <span class="pre">Wire.available()</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">Wire.available()</span></tt></dt>
<dd>Returns the number of bytes which are still available for reading
(with <tt class="docutils literal"><span class="pre">Wire.receive()</span></tt>) from the last call to
<tt class="docutils literal"><span class="pre">Wire.requestFrom(uint8,</span> <span class="pre">int)</span></tt>.</dd>
</dl>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="fard-servo" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The Arduino implementation also captures timer
channels in groups as more Servo objects are attached, but the
details of which channels have their periods reset when are
slightly different.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/round_logo_60x60.png" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="maple-quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="maple-ide-install.html">IDE Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ide.html">IDE Anatomy</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="language.html">Maple Language</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Maple Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="libs/servo.html">Servo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#servo">Servo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#liquidcrystal">LiquidCrystal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wire">Wire</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compatibility.html">Arduino Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="external-interrupts.html">External Interrupts</a></li>
<li class="toctree-l1"><a class="reference internal" href="libmaple.html">Command-Line Tools &amp; APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootloader.html">Bootloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="errata.html">Known Problems</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="i2c.html">I<sup>2</sup>C</a></li>
<li class="toctree-l1"><a class="reference internal" href="pwm.html">PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpio.html">GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="usb.html">USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="jtag.html">JTAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="adc.html">ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="spi.html">SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="usart.html">USART</a></li>
<li class="toctree-l1"><a class="reference internal" href="timers.html">Timers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="specs.html">Technical Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-index.html">Complete Language Index</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="libs/servo.html" title="Servo"
             >next</a></li>
        <li class="right" >
          <a href="language.html" title="Maple Language Reference"
             >previous</a> |</li>
    <li><a href="http://leaflabs.com">LeafLabs</a> |</li>
    <li><a href="index.html">Docs Home</a> |</li>
    
        <li><a href="index.html">Index</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, LeafLabs, LLC.
      Last updated on Dec 21, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>