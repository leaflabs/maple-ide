<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head><title>Maple Reference Documentation</title>
<link rel="stylesheet" href="minimal.css" type="text/css">
</head><body> 
<!-- minimalist html; this is designed to be copy/pasted into a website -->
<!-- STARTDOC -->
<h1>Maple Reference Documentation: USB</h1>

<ul>
  <li><a href="#functions">Function Reference</a>
  <li><a href="#links">Recommended Reading</a>
</ul>

<p>
The Maple stm32 microprocessor includes a dedicated USB peripheral which can be
configured to act as a general USB slave device with transfer rates up to
12mbps (it unfortunately can not be configured as a host or on-the-go device).
By default the peripheral is configured for two uses: first to recieve sketch/program uploads from the IDE, and second to emulate a regular serial port for use
as a terminal (text read/write). 

<p>
The emulated terminal is relatively slow and inefficient; it is best for 
transfering data at regulat serial speeds (kilobaud). Users requiring faster
data transfer should consider implementing a different communications protocol;
the Maple could be reprogrammed to appear as a mass storage device (thumb
drive), human interface device (mouse or keyboard), microphone, or any other
USB device. 

<h2><a name="functions">Function Reference</a></h2>

In the following replace "SerialN" with Serial1, Serial2, or Serial3.

<dl>
  <dt><code>#include "HardwareUsb.h"</code><br>
      <code>HardwareUsb Usb</code><br>
  <dd> This include and declaration must be included at the start of any sketch
  or program that uses the USB-serial interface.

  <dt><code>Usb.begin(baudrate)</code><br>
  <dd><code>begin()</code> is usually called in <code>setup()</code> to
  configure the baudrate of the given serial port and to set up the header pins
  appropriately. It can be called at any time to reconfigure a port or to
  change the baudrate. 9600 baud is the generic speed most widely supported by
  other devices and terminals.

  <dt><code>SerialN.print(...)</code><br>
      <code>SerialN.println(...)</code><br>
  <dd> Writes data into the port buffer to be transmitted as soon as possible.
  Accepts strings (character arrays). If a raw integer is passed the
  corresponding ASCII character will be transmitted; to print out a number in
  human readable form add a second parameter with the base system. Eg, to print
  out the decimal number '1234' use <code>print(1234,DEC)</code>; to print out
  the binary numner '1001' use <code>print(9,BIN)</code>. 
    
  <dt><code>SerialN.available()</code><br> <code>SerialN.read()</code><br>
  <dd><code>read()</code> will return any data that has been recieved over the
  port and <code>available()</code> will tell if any such data acutally exists,
  and if so how many bytes. If there is no data <code>read()</code> will
  block/fail, so the usual program structure is to poll with
  <code>available()</code> and only <code>read()</code> if there's something
  ready.  </dl>

<h2><a name="links">Recommended Reading</a></h2>
<ul>
  <li>usb programming guide
  <li>ACM reference
  <li>stm32 datasheet
</ul>


<div class="box">
<h3><i>About this Document</i></h3>
<p>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
<img alt="Creative Commons License" style="border-width:0" 
    src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
<br /><i>This documentation is released under a 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
Creative Commons Attribution-Share Alike 3.0</a> license.</i>

<p>
Translations are welcomed; give us a ping to make sure we aren't in the
process of revising or editing first.

<p>
Changelog:
<ul>
    <li>28 April 2010 [bnewbold]: initial writeup
</u>
</div>
<!-- ENDDOC -->
</body></html>
